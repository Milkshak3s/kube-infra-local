apiVersion: apps/v1
kind: Deployment
metadata:
  name: marketing-site
  namespace: marketing
spec:
  selector:
    matchLabels:
      app: marketing-site
  replicas: 2 # tells deployment to run 2 pods matching the template
  template:
    metadata:
      labels:
        app: marketing-site
    spec:
      containers:
      - name: nginx
        image: ghcr.io/milkshak3s/nginx-from-base64:v0.1.0
        env:
        - name: HTML_FILE
          value: "PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIiBkYXRhLXRoZW1lPSJsaWdodCI+CiAgPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJ1dGYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEiPgogICAgPG1ldGEgbmFtZT0iY29sb3Itc2NoZW1lIiBjb250ZW50PSJsaWdodCBkYXJrIiAvPgogICAgPGxpbmsKICAgICAgcmVsPSJzdHlsZXNoZWV0IgogICAgICBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL0BwaWNvY3NzL3BpY29AMi9jc3MvcGljby5taW4uY3NzIgogICAgLz4KICAgIDx0aXRsZT5IZWxsbyB3b3JsZCE8L3RpdGxlPgogIDwvaGVhZD4KICA8Ym9keSBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogbGF2ZW5kZXI7Ij4KICAgIDxtYWluIGNsYXNzPSJjb250YWluZXIiIHN0eWxlPSJwYWRkaW5nLXRvcDogMTAlOyBwYWRkaW5nLWJvdHRvbTogMTAlOyI+CiAgICAgIDxoMSBjbGFzcz0ieHhsIiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDY1MCU7IHBhZGRpbmctYm90dG9tOiAxJSI+bWlsa3NoYWtlcyAuIGNsb3VkPC9oMT4KICAgICAgPHAgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZy1ib3R0b206IDQlOyI+CiAgICAgICAgPGI+PGEgaHJlZj0ibWFpbHRvOnNlcnZpY2VzQG1pbGtzaGFrZXMuY2xvdWQiPnNlcnZpY2VzQG1pbGtzaGFrZXMuY2xvdWQ8L2E+PC9iPgogICAgICA8L3A+CiAgICAgIDxkaXYgY2xhc3M9ImdyaWQiPgogICAgICAgIDxhcnRpY2xlPgogICAgICAgICAgPGhlYWRlcj48Yj5SZXZlcnNlIFByb3hpZXM8L2I+PC9oZWFkZXI+CiAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDYwJTsiIGNsYXNzPSJvdmVyZmxvdy1hdXRvIj4KICAgICAgICAgICAgPHRhYmxlPgogICAgICAgICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgICAgIDx0aCBzY29wZT0iY29sIj48L3RoPgogICAgICAgICAgICAgICAgPHRoIHNjb3BlPSJjb2wiPk1vbnRobHk8L3RoPgogICAgICAgICAgICAgICAgPHRoIHNjb3BlPSJjb2wiPkhvdXJseTwvdGg+CiAgICAgICAgICAgICAgPC90aGVhZD4KICAgICAgICAgICAgICA8dGJvZHk+CiAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT0icm93Ij5taWxrc2hha2VzLmNsb3VkPC90aD4KICAgICAgICAgICAgICAgICAgPHRkPiQ3LjI1PC90ZD4KICAgICAgICAgICAgICAgICAgPHRkPiQwLjAxMDA3PC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT0icm93Ij5HQ1AgLSB1cy13ZXN0MTwvdGg+CiAgICAgICAgICAgICAgICAgIDx0ZD4kNy41MzM2PC90ZD4KICAgICAgICAgICAgICAgICAgPHRkPiQwLjAxMDMyPC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT0icm93Ij5BV1MgLSB1cy1lYXN0NDwvdGg+CiAgICAgICAgICAgICAgICAgIDx0ZD4kNy45NDg4PC90ZD4KICAgICAgICAgICAgICAgICAgPHRkPiQwLjAxMTA0PC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgPC90Ym9keT4KICAgICAgICAgICAgPC90YWJsZT4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGZvb3Rlcj4KICAgICAgICAgICAgPGJ1dHRvbiBzdHlsZT0iZmxvYXQ6IHJpZ2h0OyIgb25jbGljaz0ibG9jYXRpb24uaHJlZj0nbWFpbHRvOmNocmlzQG1pbGtzaGFrZXMuY2xvdWQ/c3ViamVjdCA9IFByb3hpZXMgUGxlYXNlJmJvZHkgPSBHaW1tZSBhIHByb3h5JyI+R0VUIENPTk5FQ1RFRDwvYnV0dG9uPgogICAgICAgICAgPC9mb290ZXI+CiAgICAgICAgPC9hcnRpY2xlPgogICAgICAgIDxhcnRpY2xlPgogICAgICAgICAgPGhlYWRlcj48Yj5WaXJ0dWFsIE1hY2hpbmVzPC9iPjwvaGVhZGVyPgogICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiA2MCU7IiBjbGFzcz0ib3ZlcmZsb3ctYXV0byI+CiAgICAgICAgICAgIDx0YWJsZT4KICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICA8dGggc2NvcGU9ImNvbCI+PC90aD4KICAgICAgICAgICAgICAgIDx0aCBzY29wZT0iY29sIj5Nb250aGx5PC90aD4KICAgICAgICAgICAgICAgIDx0aCBzY29wZT0iY29sIj5Ib3VybHk8L3RoPgogICAgICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICAgICAgPHRib2R5PgogICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICA8dGggc2NvcGU9InJvdyI+MSB2Q29yZTwvdGg+CiAgICAgICAgICAgICAgICAgIDx0ZD4kNS41MTwvdGQ+CiAgICAgICAgICAgICAgICAgIDx0ZD4kMC4wMDc2NjwvdGQ+CiAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICA8dGggc2NvcGU9InJvdyI+MUdCIFJBTTwvdGg+CiAgICAgICAgICAgICAgICAgIDx0ZD4kMC4yNTwvdGQ+CiAgICAgICAgICAgICAgICAgIDx0ZD4kMC4wMDAzNTwvdGQ+CiAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICA8dGggc2NvcGU9InJvdyI+SVB2NDwvdGg+CiAgICAgICAgICAgICAgICAgIDx0ZD4kMS41MDwvdGQ+CiAgICAgICAgICAgICAgICAgIDx0ZD5OL0E8L3RkPgogICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICA8L3Rib2R5PgogICAgICAgICAgICA8L3RhYmxlPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8Zm9vdGVyPgogICAgICAgICAgICA8YnV0dG9uIHN0eWxlPSJmbG9hdDogcmlnaHQ7Ij5ERVBMT1k8L2J1dHRvbj4KICAgICAgICAgIDwvZm9vdGVyPgogICAgICAgIDwvYXJ0aWNsZT4KICAgICAgICA8YXJ0aWNsZT4KICAgICAgICAgIDxoZWFkZXI+PGI+UmVkIFRlYW0gSW5mcmFzdHJ1Y3R1cmU8L2I+PC9oZWFkZXI+CiAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDYwJTsiIGNsYXNzPSJvdmVyZmxvdy1hdXRvIj4KICAgICAgICAgICAgPHA+V3JpdGluZyB0ZXJyYWZvcm0gZ290IHlvdSBkb3duPzwvcD4KICAgICAgICAgICAgPHVsPgogICAgICAgICAgICAgIDxsaT5SdW4gb24gPGk+b3VyPC9pPiBpbmZyYXN0cnVjdHVyZTwvbGk+CiAgICAgICAgICAgICAgPGxpPlJ1biBvbiA8aT55b3VyPC9pPiBpbmZyYXN0cnVjdHVyZTwvbGk+CiAgICAgICAgICAgICAgPGxpPkRlcGxveSBtdWx0aXBsZSBDMiBzZXJ2aWNlczwvbGk+CiAgICAgICAgICAgICAgPGxpPkxldCB1cyBkbyB0aGUgcGx1bWJpbmc8L2xpPgogICAgICAgICAgICA8L3VsPgogICAgICAgICAgICA8ZGl2PjwvZGl2PgogICAgICAgICAgICA8cD5Db250YWN0IHVzIHRvIHNldHVwIGEgY29uc3VsdGF0aW9uITwvcD4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGZvb3Rlcj4KICAgICAgICAgICAgPGJ1dHRvbiBzdHlsZT0iZmxvYXQ6IHJpZ2h0OyI+Q09OVEFDVCBVUzwvYnV0dG9uPgogICAgICAgICAgPC9mb290ZXI+CiAgICAgICAgPC9hcnRpY2xlPgogICAgICA8L2Rpdj4KICAgIDwvbWFpbj4KICA8L2JvZHk+CjwvaHRtbD4K"
        ports:
        - containerPort: 80
